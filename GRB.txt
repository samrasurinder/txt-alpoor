schemas=(GRBINSTALLUSER,
GRB_ASSIST_2,
GRB_FRAMEWORK_2,
GRB_SERVICE_USER,
GRB_WEB_USER_2)



create directory GRB as '/tmp';
expdp \'/ as sysdba\' DIRECTORY=GRB dumpfile=ASB_GRB.dmp logifle=ASB_GRB.log


SET LONG 20000 LONGCHUNKSIZE 20000 PAGESIZE 0 LINESIZE 1000 FEEDBACK OFF VERIFY OFF TRIMSPOOL ON

BEGIN
   DBMS_METADATA.set_transform_param (DBMS_METADATA.session_transform, 'SQLTERMINATOR', true);
   DBMS_METADATA.set_transform_param (DBMS_METADATA.session_transform, 'PRETTY', true);
END;
/

SELECT DBMS_METADATA.get_ddl ('TABLESPACE', tablespace_name)
FROM   dba_tablespaces
WHERE  tablespace_name = DECODE(UPPER('&1'), 'ALL', tablespace_name, UPPER('&1'));

SET PAGESIZE 14 LINESIZE 100 FEEDBACK ON VERIFY ON


SQL> select tablespace_name from dba_tablespaces where tablespace_name like '%GRB%';

TABLESPACE_NAME
------------------------------
GRB_ASSIST_2
GRB_EBISII
GRB_FRAMEWORK_2
WEB_GRB_ASSIST_2_DATA_TDE
WEB_GRB_FRAMEWORK_2_DATA_TDE
WEB_GRB_ASSIST_2_INDEX_TDE
WEB_GRB_FRAMEWORK_2_INDEX_TDE


SQL> select tablespace_name,encrypted from dba_tablespaces where tablespace_name like '%GRB%';

TABLESPACE_NAME                ENC
------------------------------ ---
GRB_ASSIST_2                   NO
GRB_EBISII                     NO
GRB_FRAMEWORK_2                NO
WEB_GRB_ASSIST_2_DATA_TDE      YES
WEB_GRB_FRAMEWORK_2_DATA_TDE   YES
WEB_GRB_ASSIST_2_INDEX_TDE     YES
WEB_GRB_FRAMEWORK_2_INDEX_TDE  YES

7 rows selected.

SQL>

create tablespace GRB_ASSIST_2 datafile '+PRD_DATA' size 100M  autoextend on  maxsize 31G;
create tablespace GRB_EBISII    datafile '+PRD_DATA' size 100M  autoextend on  maxsize 31G;
create tablespace GRB_FRAMEWORK_2 datafile '+PRD_DATA' size 100M  autoextend on  maxsize 31G;



ALTER SYSTEM SET ENCRYPTION KEY IDENTIFIED BY "Testing123#Testing123#";
 ADMINISTER KEY MANAGEMENT CREATE LOCAL AUTO_LOGIN KEYSTORE FROM KEYSTORE '/u02/app/oracle/WALLETS/GRBPRD/' IDENTIFIED BY "Testing123#Testing123#";


CREATE TABLESPACE WEB_GRB_ASSIST_2_DATA_TDE
DATAFILE '+PRD_DATA' SIZE 100M
AUTOEXTEND ON maxsize 31G
ENCRYPTION USING 'AES256'
DEFAULT STORAGE(ENCRYPT);

CREATE TABLESPACE WEB_GRB_FRAMEWORK_2_DATA_TDE   
DATAFILE '+PRD_DATA' SIZE 100M
AUTOEXTEND ON maxsize 31G
ENCRYPTION USING 'AES256'
DEFAULT STORAGE(ENCRYPT);

CREATE TABLESPACE WEB_GRB_ASSIST_2_INDEX_TDE     
DATAFILE '+PRD_DATA' SIZE 100M
AUTOEXTEND ON maxsize 31G
ENCRYPTION USING 'AES256'
DEFAULT STORAGE(ENCRYPT);

CREATE TABLESPACE WEB_GRB_FRAMEWORK_2_INDEX_TDE  
DATAFILE '+PRD_DATA' SIZE 100M
AUTOEXTEND ON maxsize 31G
ENCRYPTION USING 'AES256'
DEFAULT STORAGE(ENCRYPT);



 CREATE TABLESPACE "GRB_ASSIST_2" DATAFILE
  SIZE 2033188864
  AUTOEXTEND ON NEXT 104857600 MAXSIZE 32767M,
  SIZE 1073741824
  AUTOEXTEND ON NEXT 268435456 MAXSIZE 32767M
  LOGGING ONLINE PERMANENT BLOCKSIZE 8192
  EXTENT MANAGEMENT LOCAL AUTOALLOCATE DEFAULT
 NOCOMPRESS  SEGMENT SPACE MANAGEMENT AUTO;
   ALTER DATABASE DATAFILE
  '+GRBTST1' RESIZE 3291480064;
   ALTER DATABASE DATAFILE
  '+GRBTST1' RESIZE 2415919104;



 CREATE TABLESPACE "GRB_EBISII" DATAFILE
  SIZE 2281701376
  AUTOEXTEND ON NEXT 104857600 MAXSIZE 32767M,
  SIZE 1073741824
  AUTOEXTEND ON NEXT 268435456 MAXSIZE 32767M
  LOGGING ONLINE PERMANENT BLOCKSIZE 8192
  EXTENT MANAGEMENT LOCAL AUTOALLOCATE DEFAULT
 NOCOMPRESS  SEGMENT SPACE MANAGEMENT AUTO;
   ALTER DATABASE DATAFILE
  '+CPY_DATA/cpy1/datafile/grb_ebisii.683.1038535707' RESIZE 7839154176;
   ALTER DATABASE DATAFILE
  '+CPY_DATA/cpy1/datafile/grb_ebisii.1118.1038535711' RESIZE 6710886400;



 CREATE TABLESPACE "GRB_FRAMEWORK_2" DATAFILE
  SIZE 52428800
  AUTOEXTEND ON NEXT 1048576 MAXSIZE 32767M
  LOGGING ONLINE PERMANENT BLOCKSIZE 8192
  EXTENT MANAGEMENT LOCAL AUTOALLOCATE DEFAULT
 NOCOMPRESS  SEGMENT SPACE MANAGEMENT AUTO;
   ALTER DATABASE DATAFILE
  '+CPY_DATA/cpy1/datafile/grb_framework_2.1093.1038536465' RESIZE 228589568;




  CREATE TABLESPACE "WEB_GRB_ASSIST_2_DATA_TDE" DATAFILE
  SIZE 100M
  AUTOEXTEND ON  MAXSIZE 32676M
    EXTENT MANAGEMENT LOCAL AUTOALLOCATE ENCRYPTION DEFAULT STORAGE(ENCRYPT) SEGMENT SPACE MANAGEMENT AUTO;
  


  CREATE TABLESPACE "WEB_GRB_FRAMEWORK_2_DATA_TDE" DATAFILE
  SIZE 52428800
  AUTOEXTEND ON NEXT 10485760 MAXSIZE 32676M
  LOGGING ONLINE PERMANENT BLOCKSIZE 8192
  EXTENT MANAGEMENT LOCAL AUTOALLOCATE ENCRYPTION DEFAULT STORAGE(ENCRYPT) SEGMENT SPACE MANAGEMENT AUTO;


 CREATE TABLESPACE "WEB_GRB_ASSIST_2_INDEX_TDE" DATAFILE
  SIZE 52428800
  AUTOEXTEND ON NEXT 10485760 MAXSIZE 32676M
  LOGGING ONLINE PERMANENT BLOCKSIZE 8192
  EXTENT MANAGEMENT LOCAL AUTOALLOCATE ENCRYPTION DEFAULT STORAGE(ENCRYPT) SEGMENT SPACE MANAGEMENT AUTO;
   ALTER DATABASE DATAFILE
  '+CPY_DATA/cpy1/datafile/web_grb_assist_2_index_tde.1480.1038536299' RESIZE 115343360;




  CREATE TABLESPACE "WEB_GRB_FRAMEWORK_2_INDEX_TDE" DATAFILE
  SIZE 52428800
  AUTOEXTEND ON NEXT 10485760 MAXSIZE 32676M
  LOGGING ONLINE PERMANENT BLOCKSIZE 8192
  EXTENT MANAGEMENT LOCAL AUTOALLOCATE ENCRYPTION DEFAULT STORAGE(ENCRYPT) SEGMENT SPACE MANAGEMENT AUTO;




Test	GRBTST1 
GRBTST3				
CPY	GRBCPY	 			
ASB	GRBASB 				
UAT	GRBUAT				
IVV	GRBIVV1				
Development	GRBDEV1				




