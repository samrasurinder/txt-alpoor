BEGIN
    FOR C IN
    (SELECT SCHEDULED_TIME, JOB_ID
    FROM MGMT$JOB_EXECUTION_HISTORY
    WHERE JOB_OWNER = ‘SYSMAN’
    AND JOB_ID IN (SELECT DISTINCT(JOB_ID) FROM MGMT$JOB_EXECUTION_HISTORY WHERE STATUS=’Error’ or STATUS=’Failed’)
    AND STATUS = ‘Error’ or STATUS=’Failed’)
    LOOP
          EM_JOB_OPS.DELETE_JOB_RUN(C.JOB_ID,C.SCHEDULED_TIME);
    END LOOP;
  COMMIT;
END;